resources:
  - name: HeartRateRepo
    type: GitRepo
    configuration:
      # SCM integration where the repository is located
      gitProvider: rpidemogithub
      # Repository path, including org name/repo name
      path: yonarbel/AntPRoj

pipelines:
  - name: HeartRatePipe
    steps:
      - name: p1_s1
        type: Bash
        configuration:
          chronological: true
          affinityGroup: heart_rate_app_build_main_path
          inputResources:
            # Sets up step to be triggered when there are commit events to HeartRateRepo
            - name: HeartRateRepo
              trigger: true
        execution:
          onStart:
            - source "${res_rpidemogithub_resourcePath}/ci/scripts/build.sh"
            - on_start
          onExecute:
            - on_execute
          onSuccess:
            - on_success
          onFailure:
            - on_failure
          onComplete:
            - on_complete

      - name: p1_s2
        type: Bash
        configuration:
          inputSteps:
            - name: p1_s1
        execution:
          onExecute:
            # Demonstrates the availability of an env variable written to run state during p1_s1
            - echo $current_runid